(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{411:function(t,a,n){"use strict";n.r(a);var s=n(56),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"jetpack"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jetpack"}},[t._v("#")]),t._v(" JetPack")]),t._v(" "),n("h2",{attrs:{id:"向项目中添加组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#向项目中添加组件"}},[t._v("#")]),t._v(" 向项目中添加组件")]),t._v(" "),n("p",[t._v("架构组件可从 Google 的 Maven 代码库中获得。为了使用这些组件，您必须将代码库添加到项目中。")]),t._v(" "),n("p",[t._v("打开"),n("strong",[t._v("项目")]),t._v("的 "),n("code",[t._v("build.gradle")]),t._v(" 文件（而不是应用或模块的该文件）并添加 "),n("code",[t._v("google()")]),t._v(" 代码库，如下所示：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("allprojects "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("google")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jcenter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"声明依赖项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#声明依赖项"}},[t._v("#")]),t._v(" 声明依赖项")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/concurrent",target:"_blank",rel:"noopener noreferrer"}},[t._v("Futures（可在 androidx.concurrent 中找到）"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.concurrent:concurrent-futures:1.1.0"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Kotlin")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.concurrent:concurrent-futures-ktx:1.1.0"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期组件（包括 ViewModel）"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"kotlin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kotlin"}},[t._v("#")]),t._v(" kotlin")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("    dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" lifecycle_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.4.0"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" arch_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.1.0"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ViewModel")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-viewmodel-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ViewModel utilities for Compose")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-viewmodel-compose:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// LiveData")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-livedata-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Lifecycles only (without ViewModel or LiveData)")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-runtime-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Saved state module for ViewModel")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-viewmodel-savedstate:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Annotation processor")]),t._v("\n        kapt "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-compiler:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// alternately - if using Java8, use the following instead of lifecycle-compiler")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-common-java8:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - helpers for implementing LifecycleOwner in a Service")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-service:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - ProcessLifecycleOwner provides a lifecycle for the whole application process")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-process:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - ReactiveStreams support for LiveData")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-reactivestreams-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Test helpers for LiveData")]),t._v("\n        testImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.arch.core:core-testing:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("arch_version")]),t._v('"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n")])])]),n("h3",{attrs:{id:"java"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java"}},[t._v("#")]),t._v(" java")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("    dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" lifecycle_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.4.0"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" arch_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.1.0"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ViewModel")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-viewmodel:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// LiveData")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-livedata:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Lifecycles only (without ViewModel or LiveData)")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-runtime:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Saved state module for ViewModel")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-viewmodel-savedstate:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Annotation processor")]),t._v("\n        annotationProcessor "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-compiler:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// alternately - if using Java8, use the following instead of lifecycle-compiler")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-common-java8:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - helpers for implementing LifecycleOwner in a Service")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-service:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - ProcessLifecycleOwner provides a lifecycle for the whole application process")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-process:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - ReactiveStreams support for LiveData")]),t._v("\n        implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.lifecycle:lifecycle-reactivestreams:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("lifecycle_version")]),t._v('"')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Test helpers for LiveData")]),t._v("\n        testImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.arch.core:core-testing:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("arch_version")]),t._v('"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n")])])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/navigation",target:"_blank",rel:"noopener noreferrer"}},[t._v("导航（包括 SafeArgs）"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("在应用或模块的 "),n("code",[t._v("build.gradle")]),t._v(" 文件中添加所需工件的依赖项：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" nav_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.3.5"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Java language implementation")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-fragment:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-ui:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Kotlin")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-fragment-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-ui-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Feature module Support")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-dynamic-features-fragment:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Testing Navigation")]),t._v("\n  androidTestImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-testing:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Jetpack Compose Integration")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-compose:2.4.0-rc01"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"safe-args"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#safe-args"}},[t._v("#")]),t._v(" Safe Args")]),t._v(" "),n("p",[t._v("如需将 "),n("a",{attrs:{href:"https://developer.android.google.cn/topic/libraries/architecture/navigation/navigation-pass-data#Safe-args",target:"_blank",rel:"noopener noreferrer"}},[t._v("Safe Args"),n("OutboundLink")],1),t._v(" 添加到您的项目，请在顶层 "),n("code",[t._v("build.gradle")]),t._v(" 文件中包含以下 "),n("code",[t._v("classpath")]),t._v("：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/navigation#groovy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Groovy"),n("OutboundLink")],1),n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/navigation#kotlin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kotlin"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("buildscript "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    repositories "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("google")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" nav_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.3.5"')]),t._v("\n        classpath "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-safe-args-gradle-plugin:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("您还必须应用以下两个可用插件之一。")]),t._v(" "),n("p",[t._v("如需生成适用于 Java 模块或 Java 和 Kotlin 混合模块的 Java 语言代码，请将以下行添加到"),n("strong",[t._v("应用或模块")]),t._v("的 "),n("code",[t._v("build.gradle")]),t._v(" 文件中：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("plugins "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.navigation.safeargs'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("此外，如需生成适用于仅 Kotlin 模块的 Kotlin 语言代码，请添加以下行：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("plugins "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.navigation.safeargs.kotlin'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/paging",target:"_blank",rel:"noopener noreferrer"}},[t._v("Paging"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" paging_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"3.1.0"')]),t._v("\n\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-runtime:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("paging_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// alternatively - without Android dependencies for tests")]),t._v("\n  testImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-common:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("paging_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - RxJava2 support")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-rxjava2:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("paging_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - RxJava3 support")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-rxjava3:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("paging_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Guava ListenableFuture support")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-guava:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("paging_version")]),t._v('"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Jetpack Compose integration")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.paging:paging-compose:1.0.0-alpha14"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/room",target:"_blank",rel:"noopener noreferrer"}},[t._v("Room"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Room 的依赖项包括"),n("a",{attrs:{href:"https://developer.android.google.cn/training/data-storage/room#db-migration-testing",target:"_blank",rel:"noopener noreferrer"}},[t._v("测试 Room 迁移"),n("OutboundLink")],1),t._v("和 "),n("a",{attrs:{href:"https://developer.android.google.cn/training/data-storage/room/accessing-data#query-rxjava",target:"_blank",rel:"noopener noreferrer"}},[t._v("Room RxJava"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("p",[t._v("在应用或模块的 "),n("code",[t._v("build.gradle")]),t._v(" 文件中添加所需工件的依赖项：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" room_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.4.0"')]),t._v("\n\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-runtime:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n    annotationProcessor "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-compiler:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - RxJava2 support for Room")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-rxjava2:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - RxJava3 support for Room")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-rxjava3:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Guava support for Room, including Optional and ListenableFuture")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-guava:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Test helpers")]),t._v("\n    testImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-testing:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("room_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Paging 3 Integration")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.room:room-paging:2.4.0"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("如需了解如何使用 Kotlin 扩展，请参阅 "),n("a",{attrs:{href:"https://developer.android.google.cn/kotlin/ktx",target:"_blank",rel:"noopener noreferrer"}},[t._v("ktx 文档"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("p",[t._v("如需详细了解依赖项，请参阅"),n("a",{attrs:{href:"https://developer.android.google.cn/studio/build/dependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("添加构建依赖项"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"配置编译器选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置编译器选项"}},[t._v("#")]),t._v(" 配置编译器选项")]),t._v(" "),n("p",[t._v("Room 具有以下注解处理器选项：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("room.schemaLocation")]),t._v("：配置并启用将数据库架构导出到给定目录中的 JSON 文件的功能。如需了解详情，请参阅 "),n("a",{attrs:{href:"https://developer.android.google.cn/training/data-storage/room/migrating-db-versions#export-schema",target:"_blank",rel:"noopener noreferrer"}},[t._v("Room 迁移"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[n("code",[t._v("room.incremental")]),t._v("：启用 Gradle 增量注解处理器。")]),t._v(" "),n("li",[n("code",[t._v("room.expandProjection")]),t._v("：配置 Room 以重写查询，使其顶部星形投影在展开后仅包含 DAO 方法返回类型中定义的列。")])]),t._v(" "),n("p",[t._v("以下代码段举例说明了如何配置这些选项：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("android "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n    defaultConfig "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n        javaCompileOptions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            annotationProcessorOptions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                arguments "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"room.schemaLocation"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("projectDir")]),t._v('/schemas"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"room.incremental"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"true"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"room.expandProjection"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"true"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/jetpack/androidx/releases/work",target:"_blank",rel:"noopener noreferrer"}},[t._v("WorkManager"),n("OutboundLink")],1)])])]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencies "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" work_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.7.1"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (Java only)")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-runtime:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Kotlin + coroutines")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-runtime-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - RxJava2 support")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-rxjava2:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - GCMNetworkManager support")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-gcm:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Test helpers")]),t._v("\n    androidTestImplementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-testing:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// optional - Multiprocess support")]),t._v("\n    implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.work:work-multiprocess:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("work_version")]),t._v('"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"viewbinding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#viewbinding"}},[t._v("#")]),t._v(" ViewBinding")]),t._v(" "),n("h3",{attrs:{id:"viewbinding-设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#viewbinding-设置"}},[t._v("#")]),t._v(" ViewBinding 设置")]),t._v(" "),n("p",[t._v("视图绑定功能可按模块启用。要在某个模块中启用视图绑定，请将 "),n("code",[t._v("viewBinding")]),t._v(" 元素添加到其 "),n("code",[t._v("build.gradle")]),t._v(" 文件中，如下例所示：")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("android "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n        viewBinding "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            enabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n")])])]),n("p",[t._v("生成绑定类的名称：将 XML 文件的名称转换为驼峰式大小写，并在末尾添加“Binding”一词")]),t._v(" "),n("p",[t._v("在生成绑定类时忽略某个布局文件，请将 "),n("code",[t._v('tools:viewBindingIgnore="true"')]),t._v(" 属性添加到相应布局文件的根视图中：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("LinearLayout")]),t._v("\n            \n            "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tools:")]),t._v("viewBindingIgnore")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        \n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("LinearLayout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h3",{attrs:{id:"activity中用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#activity中用法"}},[t._v("#")]),t._v(" Activity中用法")]),t._v(" "),n("p",[t._v("如需设置绑定类的实例以供 Activity 使用，请在 Activity 的 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/android/app/Activity#oncreate",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("onCreate()")]),n("OutboundLink")],1),t._v(" 方法中执行以下步骤：")]),t._v(" "),n("ol",[n("li",[t._v("调用生成的绑定类中包含的静态 "),n("code",[t._v("inflate()")]),t._v(" 方法。此操作会创建该绑定类的实例以供 Activity 使用。")]),t._v(" "),n("li",[t._v("通过调用 "),n("code",[t._v("getRoot()")]),t._v(" 方法获取对根视图的引用。")]),t._v(" "),n("li",[t._v("将根视图传递到 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/android/app/Activity#setcontentview_1",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("setContentView()")]),n("OutboundLink")],1),t._v("，使其成为屏幕上的活动视图。")])]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lateinit")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" binding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ResultProfileBinding\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ResultProfileBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("inflate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("layoutInflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" view "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" binding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"activity基类封装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#activity基类封装"}},[t._v("#")]),t._v(" Activity基类封装")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" BaseVBindingActivity"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VB "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ViewBinding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("AppCompatActivity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" mVBinding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("VB "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" lazy "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewBinding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mVBinding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!!")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewBinding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" VB\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"fragment中用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fragment中用法"}},[t._v("#")]),t._v(" Fragment中用法")]),t._v(" "),n("p",[t._v("如需设置绑定类的实例以供 Fragment 使用，请在 Fragment 的 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/androidx/fragment/app/Fragment#oncreateview",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("onCreateView()")]),n("OutboundLink")],1),t._v(" 方法中执行以下步骤：")]),t._v(" "),n("ol",[n("li",[t._v("调用生成的绑定类中包含的静态 "),n("code",[t._v("inflate()")]),t._v(" 方法。此操作会创建该绑定类的实例以供 Fragment 使用。")]),t._v(" "),n("li",[t._v("通过调用 "),n("code",[t._v("getRoot()")]),t._v(" 方法对根视图的引用。")]),t._v(" "),n("li",[t._v("从 "),n("code",[t._v("onCreateView()")]),t._v(" 方法返回根视图，使其成为屏幕上的活动视图。")]),t._v(" "),n("li",[t._v("Fragment的 bingding 需要在视图生命周期销毁时置 null ，Activity不需要。因为 activity 的生命周期和 viewBinding 是同步的。")])]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _binding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ResultProfileBinding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This property is only valid between onCreateView and")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// onDestroyView.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" binding "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _binding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!!")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreateView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        inflater"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutInflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        container"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ViewGroup"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" View"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ResultProfileBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("inflate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" view "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" binding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" view\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onDestroyView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onDestroyView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        _binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"fragment基类封装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fragment基类封装"}},[t._v("#")]),t._v(" Fragment基类封装")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" BaseVBindingFragment"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VB "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ViewBinding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fragment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("VB"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" vBinding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("VB "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _binding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!!")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreateView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        inflater"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutInflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        container"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ViewGroup"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" View"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewBinding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" vBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewBinding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inflater"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutInflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ViewGroup"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" VB\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onDestroyView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onDestroyView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        _binding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"livedata概览"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#livedata概览"}},[t._v("#")]),t._v(" LiveData概览")]),t._v(" "),n("p",[t._v("LiveData 是一种可观察的数据存储类，具有感知activity fragment更新和service生命周期的能力，能确保只更新处于活跃生命周期状态的应用组件观察者。只有当Obserer类的生命周期处于STARTED或RESUMED状态，LiveData会更新通知。")]),t._v(" "),n("h3",{attrs:{id:"创建livedata"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建livedata"}},[t._v("#")]),t._v(" 创建LiveData")]),t._v(" "),n("p",[t._v("LiveData 是一种可用于任何数据的封装容器，其中包括可实现 "),n("code",[t._v("Collections")]),t._v(" 的对象，如 "),n("code",[t._v("List")]),t._v("。"),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LiveData",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LiveData")]),n("OutboundLink")],1),t._v(" 对象通常存储在 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 对象中，并可通过 getter 方法进行访问，如以下示例中所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" NameViewModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a LiveData with a String")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" currentName"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MutableLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" lazy "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        MutableLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Rest of the ViewModel...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"观察livedata"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#观察livedata"}},[t._v("#")]),t._v(" 观察LiveData")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" NameActivity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("AppCompatActivity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use the 'by viewModels()' Kotlin property delegate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// from the activity-ktx artifact")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" NameViewModel "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewModels")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Other code to setup the activity...")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create the observer which updates the UI.")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" nameObserver "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Observer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" newName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Update the UI, in this case, a TextView.")]),t._v("\n            nameTextView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newName\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Observe the LiveData, passing in this activity as the LifecycleOwner and the observer.")]),t._v("\n        model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameObserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"转换livedata"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#转换livedata"}},[t._v("#")]),t._v(" 转换LiveData")]),t._v(" "),n("p",[t._v("您可能希望在将 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LiveData",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LiveData")]),n("OutboundLink")],1),t._v(" 对象分派给观察者之前对存储在其中的值进行更改，或者您可能需要根据另一个实例的值返回不同的 "),n("code",[t._v("LiveData")]),t._v(" 实例。"),n("a",{attrs:{href:"https://developer.android.google.cn/reference/android/arch/lifecycle/package-summary",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 软件包会提供 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Transformations",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Transformations")]),n("OutboundLink")],1),t._v(" 类，该类包括可应对这些情况的辅助程序方法。")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("["),n("code",[t._v("Transformations.map()")]),t._v("](https://developer.android.google.cn/reference/androidx/lifecycle/Transformations#map(android.arch.lifecycle.LiveData, android.arch.core.util.Function))")]),t._v(" "),n("p",[t._v("对存储在 "),n("code",[t._v("LiveData")]),t._v(" 对象中的值应用函数，并将结果传播到下游。")])])]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" userLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("UserLiveData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" userName"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transformations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userLiveData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token expression"}},[t._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token expression"}},[t._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("["),n("code",[t._v("Transformations.switchMap()")]),t._v("](https://developer.android.google.cn/reference/androidx/lifecycle/Transformations#switchMap(android.arch.lifecycle.LiveData, android.arch.core.util.Function>))")]),t._v(" "),n("p",[t._v("与 "),n("code",[t._v("map()")]),t._v(" 类似，对存储在 "),n("code",[t._v("LiveData")]),t._v(" 对象中的值应用函数，并将结果解封和分派到下游。传递给 "),n("code",[t._v("switchMap()")]),t._v(" 的函数必须返回 "),n("code",[t._v("LiveData")]),t._v(" 对象，如以下示例中所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" userId"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transformations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("您可以使用转换方法在观察者的生命周期内传送信息。除非观察者正在观察返回的 "),n("code",[t._v("LiveData")]),t._v(" 对象，否则不会计算转换。因为转换是以延迟的方式计算，所以与生命周期相关的行为会隐式传递下去，而不需要额外的显式调用或依赖项。")]),t._v(" "),n("p",[t._v("如果您认为 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 对象中需要有 "),n("code",[t._v("Lifecycle")]),t._v(" 对象，那么进行转换或许是更好的解决方案。例如，假设您有一个界面组件，该组件接受地址并返回该地址的邮政编码。您可以为此组件实现简单的 "),n("code",[t._v("ViewModel")]),t._v("，如以下示例代码所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" repository"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PostalCodeRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPostalCode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DON'T DO THIS")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" repository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPostCode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("然后，该界面组件需要取消注册先前的 "),n("code",[t._v("LiveData")]),t._v(" 对象，并在每次调用 "),n("code",[t._v("getPostalCode()")]),t._v(" 时注册到新的实例。此外，如果重新创建了该界面组件，它会再触发一次对 "),n("code",[t._v("repository.getPostCode()")]),t._v(" 方法的调用，而不是使用先前调用所得的结果。")]),t._v(" "),n("p",[t._v("您也可以将邮政编码查询实现为地址输入的转换，如以下示例中所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" repository"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PostalCodeRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" addressInput "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MutableLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" postalCode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transformations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addressInput"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            address "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" repository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPostCode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInput")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        addressInput"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" address\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在这种情况下，"),n("code",[t._v("postalCode")]),t._v(" 字段定义为 "),n("code",[t._v("addressInput")]),t._v(" 的转换。只要您的应用具有与 "),n("code",[t._v("postalCode")]),t._v(" 字段关联的活跃观察者，就会在 "),n("code",[t._v("addressInput")]),t._v(" 发生更改时重新计算并检索该字段的值。")]),t._v(" "),n("p",[t._v("此机制允许较低级别的应用创建以延迟的方式按需计算的 "),n("code",[t._v("LiveData")]),t._v(" 对象。"),n("code",[t._v("ViewModel")]),t._v(" 对象可以轻松获取对 "),n("code",[t._v("LiveData")]),t._v(" 对象的引用，然后在其基础之上定义转换规则。")]),t._v(" "),n("h3",{attrs:{id:"合并多个-livedata-源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#合并多个-livedata-源"}},[t._v("#")]),t._v(" 合并多个 LiveData 源")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/MediatorLiveData",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("MediatorLiveData")]),n("OutboundLink")],1),t._v(" 是 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LiveData",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LiveData")]),n("OutboundLink")],1),t._v(" 的子类，允许您合并多个 LiveData 源。只要任何原始的 LiveData 源对象发生更改，就会触发 "),n("code",[t._v("MediatorLiveData")]),t._v(" 对象的观察者。")]),t._v(" "),n("p",[t._v("例如，如果界面中有可以从本地数据库或网络更新的 "),n("code",[t._v("LiveData")]),t._v(" 对象，则可以向 "),n("code",[t._v("MediatorLiveData")]),t._v(" 对象添加以下源：")]),t._v(" "),n("ul",[n("li",[t._v("与存储在数据库中的数据关联的 "),n("code",[t._v("LiveData")]),t._v(" 对象。")]),t._v(" "),n("li",[t._v("与从网络访问的数据关联的 "),n("code",[t._v("LiveData")]),t._v(" 对象。")])]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" LiveDataVM "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" data1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MutableLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserInfo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MutableLiveData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" data2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MutableLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserInfo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MutableLiveData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" mediatorMerger "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MediatorLiveData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserInfo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" MainActivity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("AppCompatActivity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    private val livaDataVm  by lazy { ViewModelProvider(this).get(LiveDataVM::class.java) }")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" liveDataVm  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" viewModels"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("LiveDataVM"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" mainBinding "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" lazy "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ActivityMainBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("inflate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("layoutInflater"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mainBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediatorMerger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSource")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Observer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediatorMerger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" it"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediatorMerger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSource")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Observer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediatorMerger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" it"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediatorMerger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Observer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            mainBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textView2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" it"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        mainBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("btMerge1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOnClickListener")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leo"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        mainBinding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("btMerge2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOnClickListener")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            liveDataVm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tony"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n")])])]),n("h2",{attrs:{id:"viewmodel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#viewmodel"}},[t._v("#")]),t._v(" ViewModel")]),t._v(" "),n("h3",{attrs:{id:"viewmodel-生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#viewmodel-生命周期"}},[t._v("#")]),t._v(" ViewModel 生命周期")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 对象存在的时间范围是获取 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 时传递给 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModelProvider",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModelProvider")]),n("OutboundLink")],1),t._v(" 的 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v("。"),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 将一直留在内存中，直到限定其存在时间范围的 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 永久消失：对于 activity，是在 activity 完成时；而对于 fragment，是在 fragment 分离时。")]),t._v(" "),n("p",[t._v("图 1 说明了 Activity 经历屏幕旋转而后结束时所处的各种生命周期状态。该图还在关联的 Activity 生命周期的旁边显示了 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 的生命周期。此图表说明了 Activity 的各种状态。这些基本状态同样适用于 Fragment 的生命周期。")]),t._v(" "),n("p",[t._v("您通常在系统首次调用 Activity 对象的 "),n("code",[t._v("onCreate()")]),t._v(" 方法时请求 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v("。系统可能会在 activity 的整个生命周期内多次调用 "),n("code",[t._v("onCreate()")]),t._v("，如在旋转设备屏幕时。"),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 存在的时间范围是从您首次请求 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ViewModel")]),n("OutboundLink")],1),t._v(" 直到 activity 完成并销毁。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://developer.android.google.cn/images/topic/libraries/architecture/viewmodel-lifecycle.png",alt:"ViewModel生命周期"}})]),t._v(" "),n("h3",{attrs:{id:"viewmodel-实例对象的获取方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#viewmodel-实例对象的获取方式"}},[t._v("#")]),t._v(" ViewModel 实例对象的获取方式")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" myViewModel1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" viewModels"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyViewModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//activity-ktx 扩展库提供")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" myViewModel2  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModelProvider")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyViewModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//需要在activity onCreated之后调用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" myViewModel3  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModelLazy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyViewModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("viewModelStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("defaultViewModelProviderFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//需要在activity onCreated之后调用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" myViewModel4  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ViewModelProvider")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("viewModelStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("defaultViewModelProviderFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyViewModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"lifecycle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle"}},[t._v("#")]),t._v(" Lifecycle")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 是一个类，用于存储有关组件（如 Activity 或 Fragment）的生命周期状态的信息，并允许其他对象观察此状态。")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 使用两种主要枚举跟踪其关联组件的生命周期状态：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("事件")]),t._v(" "),n("p",[t._v("从框架和 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 类分派的生命周期事件。这些事件映射到 Activity 和 Fragment 中的回调事件。")])]),t._v(" "),n("li",[n("p",[t._v("状态")]),t._v(" "),n("p",[t._v("由 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 对象跟踪的组件的当前状态。")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://developer.android.google.cn/images/topic/libraries/architecture/lifecycle-states.svg",alt:"生命周期状态示意图"}})]),t._v(" "),n("h3",{attrs:{id:"defaultlifecycleobserver"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#defaultlifecycleobserver"}},[t._v("#")]),t._v(" DefaultLifecycleObserver")]),t._v(" "),n("p",[t._v("通过实现 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/DefaultLifecycleObserver",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("DefaultLifecycleObserver")]),n("OutboundLink")],1),t._v(" 并替换相应的方法（如 "),n("code",[t._v("onCreate")]),t._v(" 和 "),n("code",[t._v("onStart")]),t._v(" 等）来监控组件的生命周期状态。然后，您可以通过调用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 类的 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle#addObserver(androidx.lifecycle.LifecycleObserver)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("addObserver()")]),n("OutboundLink")],1),t._v(" 方法并传递观察器的实例来添加观察器，如下例所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" MyObserver "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DefaultLifecycleObserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onResume")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("owner"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LifecycleOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onPause")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("owner"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LifecycleOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmyLifecycleOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addObserver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyObserver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("code",[t._v("myLifecycleOwner")]),t._v(" 对象实现了 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v(" 接口，我们将在接下来的部分中对该接口进行说明。")]),t._v(" "),n("h3",{attrs:{id:"lifecycleowner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lifecycleowner"}},[t._v("#")]),t._v(" LifecycleOwner")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v(" 是单一方法接口，表示类具有 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v("。它具有一种方法（即 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner#getLifecycle()",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("getLifecycle()")]),n("OutboundLink")],1),t._v("），该方法必须由类实现。")]),t._v(" "),n("p",[t._v("此接口从各个类（如 "),n("code",[t._v("Fragment")]),t._v(" 和 "),n("code",[t._v("AppCompatActivity")]),t._v("）抽象化 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Lifecycle")]),n("OutboundLink")],1),t._v(" 的所有权，并允许编写与这些类搭配使用的组件。任何自定义应用类均可实现 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v(" 接口。")]),t._v(" "),n("p",[t._v("实现 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/DefaultLifecycleObserver",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("DefaultLifecycleObserver")]),n("OutboundLink")],1),t._v(" 的组件可与实现 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v(" 的组件完美配合，因为所有者可以提供生命周期，而观察者可以注册以观察生命周期。")]),t._v(" "),n("h3",{attrs:{id:"实现自定义-lifecycleowner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现自定义-lifecycleowner"}},[t._v("#")]),t._v(" 实现自定义 LifecycleOwner")]),t._v(" "),n("p",[t._v("支持库 26.1.0 及更高版本中的 Fragment 和 Activity 已实现 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v(" 接口。")]),t._v(" "),n("p",[t._v("如果您有一个自定义类并希望使其成为 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("LifecycleOwner")]),n("OutboundLink")],1),t._v("，您可以使用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleRegistry",target:"_blank",rel:"noopener noreferrer"}},[t._v("LifecycleRegistry"),n("OutboundLink")],1),t._v(" 类，但需要将事件转发到该类，如以下代码示例中所示：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" MyActivity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Activity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LifecycleOwner "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lateinit")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" lifecycleRegistry"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LifecycleRegistry\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedInstanceState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        lifecycleRegistry "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("LifecycleRegistry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        lifecycleRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("markState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Lifecycle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("State"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CREATED"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onStart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onStart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        lifecycleRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("markState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Lifecycle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("State"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STARTED"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Lifecycle "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" lifecycleRegistry\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"navigation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#navigation"}},[t._v("#")]),t._v(" Navigation")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" nav_version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"2.4.0"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Java language implementation")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-fragment:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-ui:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Kotlin")]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-fragment-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n  implementation "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-ui-ktx:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如需将 Safe Args 添加到您的项目，请在顶层 build.gradle 文件中包含以下 classpath：")]),t._v("\nclasspath "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"androidx.navigation:navigation-safe-args-gradle-plugin:'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("nav_version")]),t._v('"')]),t._v("\n如需生成适用于 Java 模块或 Java 和 Kotlin 混合模块的 Java 语言代码，请将以下行添加到应用或模块的 build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gradle 文件中：\nplugins "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.navigation.safeargs'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n此外，如需生成适用于仅 Kotlin 模块的 Kotlin 语言代码，请添加以下行\nplugins "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.navigation.safeargs.kotlin'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"向-activity-添加-navhost"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#向-activity-添加-navhost"}},[t._v("#")]),t._v(" 向 Activity 添加 NavHost")]),t._v(" "),n("p",[t._v("导航宿主必须派生于 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/NavHost",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("NavHost")]),n("OutboundLink")],1),t._v("。Navigation 组件的默认 "),n("code",[t._v("NavHost")]),t._v(" 实现 ("),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/fragment/NavHostFragment",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("NavHostFragment")]),n("OutboundLink")],1),t._v(") 负责处理 fragment 目的地的交换。")]),t._v(" "),n("h3",{attrs:{id:"通过-xml-添加-navhostfragment"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-xml-添加-navhostfragment"}},[t._v("#")]),t._v(" 通过 XML 添加 NavHostFragment")]),t._v(" "),n("p",[t._v("以下 XML 示例显示了作为应用主 Activity 一部分的 "),n("code",[t._v("NavHostFragment")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("androidx.constraintlayout.widget.ConstraintLayout")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("android")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res/android"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("app")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res-auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("tools")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/tools"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_width")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_height")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tools:")]),t._v("context")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(".MainActivity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("androidx.appcompat.widget.Toolbar")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("androidx.fragment.app.FragmentContainerView")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/nav_host_fragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("androidx.navigation.fragment.NavHostFragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_width")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0dp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_height")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0dp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("layout_constraintLeft_toLeftOf")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("layout_constraintRight_toRightOf")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("layout_constraintTop_toTopOf")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("layout_constraintBottom_toBottomOf")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("defaultNavHost")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("navGraph")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@navigation/nav_graph"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("com.google.android.material.bottomnavigation.BottomNavigationView")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("androidx.constraintlayout.widget.ConstraintLayout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("android:name")]),t._v(" 属性包含 "),n("code",[t._v("NavHost")]),t._v(" 实现的类名称。")]),t._v(" "),n("li",[n("code",[t._v("app:navGraph")]),t._v(" 属性将 "),n("code",[t._v("NavHostFragment")]),t._v(" 与导航图相关联。导航图会在此 "),n("code",[t._v("NavHostFragment")]),t._v(" 中指定用户可以导航到的所有目的地。")]),t._v(" "),n("li",[n("code",[t._v('app:defaultNavHost="true"')]),t._v(" 属性确保您的 "),n("code",[t._v("NavHostFragment")]),t._v(" 会拦截系统返回按钮。请注意，只能有一个默认 "),n("code",[t._v("NavHost")]),t._v("。如果同一布局（例如，双窗格布局）中有多个宿主，请务必仅指定一个默认 "),n("code",[t._v("NavHost")]),t._v("。")])]),t._v(" "),n("h3",{attrs:{id:"导航到目的地"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导航到目的地"}},[t._v("#")]),t._v(" 导航到目的地")]),t._v(" "),n("p",[t._v("导航到目的地是使用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/NavController",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("NavController")]),n("OutboundLink")],1),t._v(" 完成的，它是一个在 "),n("code",[t._v("NavHost")]),t._v(" 中管理应用导航的对象。每个 "),n("code",[t._v("NavHost")]),t._v(" 均有自己的相应 "),n("code",[t._v("NavController")]),t._v("。您可以使用以下方法之一检索 "),n("code",[t._v("NavController")]),t._v("：")]),t._v(" "),n("p",[n("strong",[t._v("Kotlin")]),t._v("：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/androidx/navigation/fragment/package-summary#(androidx.fragment.app.Fragment).findNavController()",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Fragment.findNavController()")]),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/androidx/navigation/package-summary#(android.view.View).findNavController()",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("View.findNavController()")]),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/kotlin/androidx/navigation/package-summary#(android.app.Activity).findNavController(kotlin.Int)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Activity.findNavController(viewId: Int)")]),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("strong",[t._v("Java")]),t._v("：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/fragment/NavHostFragment#findNavController(android.support.v4.app.Fragment)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("NavHostFragment.findNavController(Fragment)")]),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("["),n("code",[t._v("Navigation.findNavController(Activity, @IdRes int viewId)")]),t._v("](https://developer.android.google.cn/reference/androidx/navigation/Navigation#findNavController(android.app.Activity, int))")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/Navigation#findNavController(android.view.View)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("Navigation.findNavController(View)")]),n("OutboundLink")],1)])]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" navHostFragment "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        supportFragmentManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findFragmentById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nav_host_fragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" NavHostFragment\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" navController "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" navHostFragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navController\n")])])]),n("p",[t._v("检索 "),n("code",[t._v("NavController")]),t._v(" 之后，您可以调用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/NavController#navigate(androidx.navigation.NavDirections)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("navigate()")]),n("OutboundLink")],1),t._v(" 的某个重载，以在各个目的地之间导航。每个重载均支持多种导航场景")]),t._v(" "),n("h3",{attrs:{id:"目的地之间传递数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目的地之间传递数据"}},[t._v("#")]),t._v(" 目的地之间传递数据")]),t._v(" "),n("h4",{attrs:{id:"定义目的地参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义目的地参数"}},[t._v("#")]),t._v(" 定义目的地参数")]),t._v(" "),n("p",[t._v("如需在目的地之间传递数据，首先请按照以下步骤将参数添加到接收它的目的地来定义参数：")]),t._v(" "),n("ol",[n("li",[t._v("在 "),n("a",{attrs:{href:"https://developer.android.google.cn/topic/libraries/architecture/navigation/navigation-implementing",target:"_blank",rel:"noopener noreferrer"}},[t._v("Navigation Editor"),n("OutboundLink")],1),t._v(" 中，点击接收参数的目的地。")]),t._v(" "),n("li",[t._v("在 "),n("strong",[t._v("Attributes")]),t._v(" 面板中，点击 "),n("strong",[t._v("Add")]),t._v(" ("),n("strong",[t._v("+")]),t._v(")。")]),t._v(" "),n("li",[t._v("在显示的 "),n("strong",[t._v("Add Argument Link")]),t._v(" 窗口中，输入参数名称、参数类型、参数是否可为 null，以及默认值（如果需要）。")]),t._v(" "),n("li",[t._v("点击 "),n("strong",[t._v("Add")]),t._v("。请注意，该参数现在会显示在 "),n("strong",[t._v("Attributes")]),t._v(" 面板的 "),n("strong",[t._v("Arguments")]),t._v(" 列表中。")]),t._v(" "),n("li",[t._v("接下来，点击会将您转到此目的地的相应操作。在 "),n("strong",[t._v("Attributes")]),t._v(" 面板中，您现在应该会在 "),n("strong",[t._v("Argument Default Values")]),t._v(" 部分中看到新添加的参数。")]),t._v(" "),n("li",[t._v("您还可以看到该参数已添加到 XML 中。点击 "),n("strong",[t._v("Text")]),t._v(" 标签页以切换到 XML 视图，就会发现您的参数已添加到接收该参数的目的地。相关示例如下所示：")])]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fragment")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/myFragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("argument")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myArg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("argType")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("defaultValue")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fragment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"支持的参数类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#支持的参数类型"}},[t._v("#")]),t._v(" 支持的参数类型")]),t._v(" "),n("p",[t._v("Navigation 库支持以下参数类型：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("app:argType 语法")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("是否支持默认值？")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("是否由路由处理？")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("是否可为 null？")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("整数")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="integer"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("浮点数")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="float"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("长整数")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="long"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是 - 默认值必须始终以“L”后缀结尾（例如“123L”）。")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("布尔值")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="boolean"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是 -“true”或“false”")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("字符串")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="string"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("资源引用")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="reference"')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是 - 默认值必须为“@resourceType/resourceName”格式（例如，“@style/myCustomStyle”）或“0”")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("自定义 Parcelable")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="<type>"，其中 <type> 是 '),n("code",[t._v("Parcelable")]),t._v(" 的完全限定类名称")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("支持默认值“@null”。不支持其他默认值。")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("自定义 Serializable")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="<type>"，其中 <type> 是 '),n("code",[t._v("Serializable")]),t._v(" 的完全限定类名称")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("支持默认值“@null”。不支持其他默认值。")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("自定义 Enum")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v('app:argType="<type>"，其中 <type> 是 Enum 的完全限定名称')]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("是 - 默认值必须与非限定名称匹配（例如，“SUCCESS”匹配 MyEnum.SUCCESS）。")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("否")])])])]),t._v(" "),n("p",[n("strong",[t._v("注意")]),t._v("：仅在引用类型中支持对资源的引用。在其他任何类型中使用资源引用都会导致异常。")]),t._v(" "),n("h4",{attrs:{id:"使用-safe-args-传递安全的数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-safe-args-传递安全的数据"}},[t._v("#")]),t._v(" 使用 Safe Args 传递安全的数据")]),t._v(" "),n("p",[t._v("启用 Safe Args 后，生成的代码会为每个操作包含以下类型安全的类和方法，以及每个发送和接收目的地。")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("为生成操作的每一个目的地创建一个类。该类的名称是在源目的地的名称后面加上“Directions”。例如，如果源目的地是名为 "),n("code",[t._v("SpecifyAmountFragment")]),t._v(" 的 Fragment，则生成的类的名称为 "),n("code",[t._v("SpecifyAmountFragmentDirections")]),t._v("。")]),t._v(" "),n("p",[t._v("该类会为源目的地中定义的每个操作提供一个方法。")])]),t._v(" "),n("li",[n("p",[t._v("对于用于传递参数的每个操作，都会创建一个 inner 类，该类的名称根据操作的名称确定。例如，如果操作名称为 "),n("code",[t._v("confirmationAction,")]),t._v("，则类名称为 "),n("code",[t._v("ConfirmationAction")]),t._v("。如果您的操作包含不带 "),n("code",[t._v("defaultValue")]),t._v(" 的参数，则您可以使用关联的 action 类来设置参数值。")])]),t._v(" "),n("li",[n("p",[t._v("为接收目的地创建一个类。该类的名称是在目的地的名称后面加上“Args”。例如，如果目的地 Fragment 的名称为 "),n("code",[t._v("ConfirmationFragment,")]),t._v("，则生成的类的名称为 "),n("code",[t._v("ConfirmationFragmentArgs")]),t._v("。可以使用该类的 "),n("code",[t._v("fromBundle()")]),t._v(" 方法检索参数。")])])]),t._v(" "),n("p",[t._v("以下示例说明了如何使用这些方法来设置参数并将其传递给 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/NavController#navigate(int)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("navigate()")]),n("OutboundLink")],1),t._v(" 方法：")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" View"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" amountTv"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" EditText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!!")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findViewById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editTextAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" amount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" amountTv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" action "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SpecifyAmountFragmentDirections"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("confirmationAction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findNavController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在接收目的地的代码中，请使用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/fragment/app/Fragment#getArguments()",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("getArguments()")]),n("OutboundLink")],1),t._v(" 方法来检索 bundle 并使用其内容。使用 "),n("code",[t._v("-ktx")]),t._v(" 依赖项时，Kotlin 用户还可以使用 "),n("code",[t._v("by navArgs()")]),t._v(" 属性委托来访问参数。")]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ConfirmationFragmentArgs "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("navArgs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onViewCreated")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" View"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" savedInstanceState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bundle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" tv"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TextView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findViewById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textViewAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" amount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amount\n    tv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"将-safe-args-用于全局操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将-safe-args-用于全局操作"}},[t._v("#")]),t._v(" 将 Safe Args 用于全局操作")]),t._v(" "),n("p",[t._v("将 Safe Args 用于"),n("a",{attrs:{href:"https://developer.android.google.cn/topic/libraries/architecture/navigation/navigation-global-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局操作"),n("OutboundLink")],1),t._v("时，您必须为根 "),n("code",[t._v("<navigation>")]),t._v(" 元素提供一个 "),n("code",[t._v("android:id")]),t._v(" 值，如以下示例中所示：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("navigation")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("app")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res-auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("tools")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/tools"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("android")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res/android"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/main_nav"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("startDestination")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@id/mainFragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    ...\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("navigation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("Navigation 会根据 "),n("code",[t._v("android:id")]),t._v(" 值为 "),n("code",[t._v("<navigation>")]),t._v(" 元素生成一个 "),n("code",[t._v("Directions")]),t._v(" 类。例如，如果您有具有 "),n("code",[t._v("android:id=@+id/main_nav")]),t._v(" 的 "),n("code",[t._v("<navigation>")]),t._v(" 元素，则生成的类的名称为 "),n("code",[t._v("MainNavDirections")]),t._v("。"),n("code",[t._v("<navigation>")]),t._v(" 元素中的所有目的地都生成了方法，以使用前一节中所述的相同方法来访问所有关联的全局操作。")]),t._v(" "),n("h4",{attrs:{id:"使用-bundle-对象在目的地之间传递参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-bundle-对象在目的地之间传递参数"}},[t._v("#")]),t._v(" 使用 Bundle 对象在目的地之间传递参数")]),t._v(" "),n("p",[t._v("如果您不使用 Gradle，仍然可以使用 "),n("code",[t._v("Bundle")]),t._v(" 对象在目的地之间传递参数。创建 "),n("code",[t._v("Bundle")]),t._v(" 对象并使用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/navigation/NavController#navigate(int)",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("navigate()")]),n("OutboundLink")],1),t._v(" 将它传递给目的地，如下所示：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/guide/navigation/navigation-pass-data#kotlin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kotlin"),n("OutboundLink")],1),n("a",{attrs:{href:"https://developer.android.google.cn/guide/navigation/navigation-pass-data#java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" bundle "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bundleOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"amount"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nview"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findNavController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("confirmationAction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bundle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("在接收目的地的代码中，请使用 "),n("a",{attrs:{href:"https://developer.android.google.cn/reference/androidx/fragment/app/Fragment#getArguments()",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("getArguments()")]),n("OutboundLink")],1),t._v(" 方法来检索 "),n("code",[t._v("Bundle")]),t._v(" 并使用其内容：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.android.google.cn/guide/navigation/navigation-pass-data#kotlin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kotlin"),n("OutboundLink")],1),n("a",{attrs:{href:"https://developer.android.google.cn/guide/navigation/navigation-pass-data#java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-kotlin extra-class"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" tv "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findViewById"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TextView"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textViewAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arguments"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"amount"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"嵌套图-多返回栈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#嵌套图-多返回栈"}},[t._v("#")]),t._v(" 嵌套图 多返回栈")]),t._v(" "),n("p",[t._v("自 2.4.0 版本开始 navigation 支持使用 "),n("code",[t._v("setupWithNavController")]),t._v(" 时保存并恢复每个菜单项的状态。")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("navigation")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("android")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res/android"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("app")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res-auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("tools")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/tools"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/mobile_navigation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("startDestination")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@id/nav_home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" //使用id\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("graph")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@navigation/nav_home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("graph")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@navigation/nav_dashboard"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("app:")]),t._v("graph")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@navigation/nav_notifications"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("navigation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("结合 BottomNavigationView 使用 ，BottomNavigationView 的 menu item id 必须与 导航图的 id 保持一致，否则 setupWithNavController 无法与 navigation 正确绑定使用")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--与导航图的id保持一致--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("item")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/nav_home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("icon")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@drawable/ic_home_black_24dp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@string/title_home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--    <item--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:id="@+id/nav_dashboard"--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:icon="@drawable/ic_dashboard_black_24dp"--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:title="@string/title_dashboard" />--\x3e')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--    <item--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:id="@+id/nav_notifications"--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:icon="@drawable/ic_notifications_black_24dp"--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--        android:title="@string/title_notifications" />--\x3e')]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);